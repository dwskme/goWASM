<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Go + WebAssembly Image Converter</title>
  <script src="wasm_exec.js"></script>
  <script>
    const go = new Go();
    WebAssembly.instantiateStreaming(
      fetch("main.wasm"),
      go.importObject,
    ).then((result) => {
      go.run(result.instance);
    });
  </script>
  <script src="main.wasm"></script>
</head>

<body>
  <input type="file" id="imageInput" accept="image/*" />
  <button onclick="uploadImage()">Upload Image</button>
  <br />
  <img id="imageView" alt="Uploaded Image" style="display: none" />
  <br />
  <button onclick="convertToGrayscale()">Convert to Grayscale</button>
  <br />
  <a id="downloadLink" style="display: none" download="grayscale_image.png">
    <button onclick="downloadImage()">Download Grayscale Image</button>
  </a>
</body>

</html>
